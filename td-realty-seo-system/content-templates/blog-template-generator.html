<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blog Post Generator - TD Realty SEO System</title>
  <link rel="stylesheet" href="../css/styles.css">
  <style>
    .preview-section {
      background: var(--bg-tertiary);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      padding: 1.5rem;
      font-family: Georgia, serif;
    }
    .preview-section h1 { font-size: 2rem; margin-bottom: 1rem; }
    .preview-section h2 { font-size: 1.5rem; margin: 1.5rem 0 0.75rem; }
    .preview-section h3 { font-size: 1.25rem; margin: 1rem 0 0.5rem; }
    .preview-section p { margin-bottom: 1rem; line-height: 1.8; }
    .preview-section ul { margin: 1rem 0; padding-left: 1.5rem; }
    .preview-section li { margin-bottom: 0.5rem; }
    .code-output {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 1rem;
      border-radius: var(--radius-md);
      overflow-x: auto;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 0.875rem;
      white-space: pre-wrap;
      max-height: 500px;
      overflow-y: auto;
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-content">
      <a href="../index.html" class="logo">
        <div class="logo-icon">TD</div>
        <div>
          <div class="logo-text">Blog Post Generator</div>
          <div class="logo-subtitle">SEO-Optimized Templates</div>
        </div>
      </a>
      <nav class="nav-links">
        <a href="../index.html" class="nav-link">Dashboard</a>
        <a href="../content-calendar.html" class="nav-link">Calendar</a>
        <a href="blog-template-generator.html" class="nav-link active">Blog Template</a>
        <a href="neighborhood-template.html" class="nav-link">Neighborhood</a>
        <a href="comparison-template.html" class="nav-link">Comparison</a>
      </nav>
      <button class="theme-toggle" onclick="toggleTheme()">
        <span id="theme-icon">&#9790;</span>
      </button>
    </div>
  </header>

  <main class="container">
    <div class="grid grid-2">
      <!-- Input Form -->
      <section class="card fade-in">
        <div class="card-header">
          <h2 class="card-title">&#9997; Blog Post Settings</h2>
        </div>
        <div class="card-body">
          <div class="form-group">
            <label class="form-label">Post Title</label>
            <input type="text" class="form-input" id="post-title"
                   placeholder="e.g., 1% Commission Realtor Columbus Ohio: Complete Guide"
                   oninput="updatePreview()">
          </div>

          <div class="form-group">
            <label class="form-label">Target Keyword</label>
            <input type="text" class="form-input" id="target-keyword"
                   placeholder="e.g., 1% commission realtor Columbus Ohio"
                   oninput="updatePreview()">
          </div>

          <div class="form-group">
            <label class="form-label">Post Type</label>
            <select class="form-select" id="post-type" onchange="updatePreview()">
              <option value="guide">Comprehensive Guide</option>
              <option value="how-to">How-To Article</option>
              <option value="comparison">Comparison Post</option>
              <option value="market-update">Market Update</option>
              <option value="listicle">Listicle</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Word Count Target</label>
            <select class="form-select" id="word-count" onchange="updatePreview()">
              <option value="1000">1,000 words (Short)</option>
              <option value="1500" selected>1,500 words (Medium)</option>
              <option value="2000">2,000 words (Long)</option>
              <option value="3000">3,000+ words (Pillar)</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">City Focus (Optional)</label>
            <select class="form-select" id="city-focus" onchange="updatePreview()">
              <option value="">General Columbus Area</option>
              <option value="Columbus">Columbus</option>
              <option value="Westerville">Westerville</option>
              <option value="Dublin">Dublin</option>
              <option value="Gahanna">Gahanna</option>
              <option value="New Albany">New Albany</option>
              <option value="Powell">Powell</option>
              <option value="Lewis Center">Lewis Center</option>
              <option value="Delaware">Delaware</option>
              <option value="Hilliard">Hilliard</option>
              <option value="Upper Arlington">Upper Arlington</option>
              <option value="Worthington">Worthington</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Include Sections</label>
            <div class="checkbox-group">
              <label class="checkbox-item">
                <input type="checkbox" class="checkbox-input" id="include-faq" checked onchange="updatePreview()">
                <span class="checkbox-label">FAQ Section</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" class="checkbox-input" id="include-cta" checked onchange="updatePreview()">
                <span class="checkbox-label">Call-to-Action</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" class="checkbox-input" id="include-author" checked onchange="updatePreview()">
                <span class="checkbox-label">Author Bio</span>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" class="checkbox-input" id="include-schema" checked onchange="updatePreview()">
                <span class="checkbox-label">Schema Markup</span>
              </label>
            </div>
          </div>
        </div>
      </section>

      <!-- SEO Preview -->
      <section class="card fade-in">
        <div class="card-header">
          <h2 class="card-title">&#128269; SEO Preview</h2>
        </div>
        <div class="card-body">
          <div class="mb-4">
            <label class="form-label">Title Tag <span id="title-char-count" class="text-muted">(0/60)</span></label>
            <div style="background: white; border: 1px solid #ddd; border-radius: 8px; padding: 1rem;">
              <div style="color: #1a0dab; font-size: 1.125rem; font-family: Arial;" id="seo-title">Your Title Here</div>
              <div style="color: #006621; font-size: 0.875rem;">tdrealtyohio.com/blog/your-post-slug</div>
            </div>
            <div class="text-xs mt-1" id="title-status"></div>
          </div>

          <div class="mb-4">
            <label class="form-label">Meta Description <span id="meta-char-count" class="text-muted">(0/160)</span></label>
            <div style="background: white; border: 1px solid #ddd; border-radius: 8px; padding: 1rem;">
              <div style="color: #545454; font-size: 0.875rem; line-height: 1.4;" id="seo-meta">
                Your meta description will appear here...
              </div>
            </div>
            <div class="text-xs mt-1" id="meta-status"></div>
          </div>

          <div>
            <label class="form-label">Suggested URL Slug</label>
            <code style="display: block; background: var(--bg-tertiary); padding: 0.75rem; border-radius: var(--radius-md);" id="url-slug">
              /blog/your-post-slug
            </code>
          </div>
        </div>
      </section>
    </div>

    <!-- Generated Structure -->
    <section class="card mt-4 fade-in">
      <div class="card-header">
        <h2 class="card-title">&#128221; Post Structure</h2>
        <div class="flex gap-2">
          <button class="btn btn-sm btn-outline" onclick="showTab('outline')">Outline</button>
          <button class="btn btn-sm btn-outline" onclick="showTab('html')">HTML Code</button>
          <button class="btn btn-sm btn-outline" onclick="showTab('schema')">Schema JSON</button>
        </div>
      </div>
      <div class="card-body">
        <!-- Outline Tab -->
        <div id="outline-tab" class="tab-content">
          <div class="preview-section" id="post-outline">
            <!-- Generated outline -->
          </div>
        </div>

        <!-- HTML Tab -->
        <div id="html-tab" class="tab-content" style="display: none;">
          <div class="flex justify-between mb-2">
            <span class="text-sm text-muted">Copy this HTML template</span>
            <button class="btn btn-sm btn-primary" onclick="copyHtml()">Copy HTML</button>
          </div>
          <div class="code-output" id="html-output"></div>
        </div>

        <!-- Schema Tab -->
        <div id="schema-tab" class="tab-content" style="display: none;">
          <div class="flex justify-between mb-2">
            <span class="text-sm text-muted">Add this JSON-LD to your page head</span>
            <button class="btn btn-sm btn-primary" onclick="copySchema()">Copy Schema</button>
          </div>
          <div class="code-output" id="schema-output"></div>
        </div>
      </div>
    </section>
  </main>

  <script src="../js/app.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      updatePreview();
      updateThemeIcon();
    });

    function updatePreview() {
      const title = document.getElementById('post-title').value || 'Your Blog Post Title';
      const keyword = document.getElementById('target-keyword').value || 'target keyword';
      const postType = document.getElementById('post-type').value;
      const wordCount = document.getElementById('word-count').value;
      const city = document.getElementById('city-focus').value;
      const includeFaq = document.getElementById('include-faq').checked;
      const includeCta = document.getElementById('include-cta').checked;
      const includeAuthor = document.getElementById('include-author').checked;
      const includeSchema = document.getElementById('include-schema').checked;

      // Generate SEO title (under 60 chars)
      let seoTitle = title;
      if (seoTitle.length > 60) {
        seoTitle = seoTitle.substring(0, 57) + '...';
      }
      document.getElementById('seo-title').textContent = seoTitle;
      document.getElementById('title-char-count').textContent = `(${title.length}/60)`;
      document.getElementById('title-status').innerHTML = title.length > 60
        ? '<span style="color: var(--danger);">Too long - may be truncated in search results</span>'
        : title.length > 0 ? '<span style="color: var(--success);">Good length</span>' : '';

      // Generate meta description
      const cityText = city ? ` in ${city}` : ' in Columbus';
      let metaDesc = `Discover ${keyword}${cityText}. TD Realty Ohio offers 1% listing commission when you buy and sell with us. Save thousands on your home sale!`;
      if (metaDesc.length > 160) {
        metaDesc = metaDesc.substring(0, 157) + '...';
      }
      document.getElementById('seo-meta').textContent = metaDesc;
      document.getElementById('meta-char-count').textContent = `(${metaDesc.length}/160)`;
      document.getElementById('meta-status').innerHTML = metaDesc.length <= 160
        ? '<span style="color: var(--success);">Good length</span>'
        : '<span style="color: var(--warning);">Consider shortening</span>';

      // Generate URL slug
      const slug = title.toLowerCase()
        .replace(/[^a-z0-9\s-]/g, '')
        .replace(/\s+/g, '-')
        .substring(0, 50);
      document.getElementById('url-slug').textContent = `/blog/${slug || 'your-post-slug'}`;

      // Generate outline based on post type
      const outline = generateOutline(title, keyword, postType, wordCount, city, includeFaq, includeCta, includeAuthor);
      document.getElementById('post-outline').innerHTML = outline;

      // Generate HTML
      const html = generateHtml(title, keyword, postType, city, metaDesc, includeFaq, includeCta, includeAuthor);
      document.getElementById('html-output').textContent = html;

      // Generate Schema
      if (includeSchema) {
        const schema = generateSchema(title, metaDesc, keyword);
        document.getElementById('schema-output').textContent = JSON.stringify(schema, null, 2);
      } else {
        document.getElementById('schema-output').textContent = '// Schema disabled';
      }
    }

    function generateOutline(title, keyword, type, wordCount, city, includeFaq, includeCta, includeAuthor) {
      const cityText = city || 'Columbus';
      const sections = [];

      // H1
      sections.push(`<h1>${escapeHtml(title)}</h1>`);
      sections.push(`<p><em>Target Keyword: ${escapeHtml(keyword)}</em></p>`);
      sections.push(`<p><em>Word Count Target: ${wordCount} words</em></p>`);

      // Introduction
      sections.push(`<h2>Introduction</h2>`);
      sections.push(`<p>[Write 100-150 words introducing the topic. Include the target keyword naturally in the first paragraph. Address the reader's pain point - wanting to save money on real estate commissions.]</p>`);

      // Type-specific sections
      if (type === 'guide') {
        sections.push(`<h2>What Is a 1% Commission Realtor?</h2>`);
        sections.push(`<p>[Explain the 1% commission model. Compare to traditional 6% commission structure.]</p>`);

        sections.push(`<h2>How TD Realty's 1% Commission Works</h2>`);
        sections.push(`<p>[Explain: 1% when buying + selling, 2% sell only. Include commission savings calculator example.]</p>`);

        sections.push(`<h3>Commission Savings Example</h3>`);
        sections.push(`<p>[Table showing savings on $300K, $400K, $500K homes]</p>`);

        sections.push(`<h2>Benefits of Using a Discount Realtor in ${cityText}</h2>`);
        sections.push(`<ul>
          <li>Save thousands in commission fees</li>
          <li>Full-service representation</li>
          <li>FREE pre-listing inspection included</li>
          <li>Local market expertise</li>
        </ul>`);

        sections.push(`<h2>What's Included in TD Realty's Service</h2>`);
        sections.push(`<p>[List all services: MLS listing, professional photos, marketing, negotiations, etc.]</p>`);

      } else if (type === 'how-to') {
        sections.push(`<h2>Step 1: Understand Your Options</h2>`);
        sections.push(`<p>[Explain different commission structures available]</p>`);

        sections.push(`<h2>Step 2: Calculate Your Potential Savings</h2>`);
        sections.push(`<p>[Provide calculation examples]</p>`);

        sections.push(`<h2>Step 3: Choose the Right Discount Realtor</h2>`);
        sections.push(`<p>[What to look for in a discount realtor]</p>`);

        sections.push(`<h2>Step 4: Prepare Your Home for Sale</h2>`);
        sections.push(`<p>[Pre-listing tips, mention FREE inspection]</p>`);

        sections.push(`<h2>Step 5: List and Sell</h2>`);
        sections.push(`<p>[The selling process with TD Realty]</p>`);

      } else if (type === 'market-update') {
        const currentMonth = new Date().toLocaleString('default', { month: 'long', year: 'numeric' });
        sections.push(`<h2>${cityText} Housing Market Overview - ${currentMonth}</h2>`);
        sections.push(`<p>[Current market conditions, median prices, inventory levels]</p>`);

        sections.push(`<h2>Home Prices in ${cityText}</h2>`);
        sections.push(`<p>[Median price, YoY change, price per sqft]</p>`);

        sections.push(`<h2>Days on Market</h2>`);
        sections.push(`<p>[Average DOM, buyer vs seller market analysis]</p>`);

        sections.push(`<h2>What This Means for Sellers</h2>`);
        sections.push(`<p>[Market implications, why saving on commission matters now]</p>`);

        sections.push(`<h2>What This Means for Buyers</h2>`);
        sections.push(`<p>[Buying conditions, mention 1% cashback for first-time buyers]</p>`);
      }

      // FAQ Section
      if (includeFaq) {
        sections.push(`<h2>Frequently Asked Questions</h2>`);
        sections.push(`<h3>Is a 1% commission realtor legitimate?</h3>`);
        sections.push(`<p>[Yes, explain TD Realty's licensing, experience since 2017]</p>`);

        sections.push(`<h3>What's the catch with discount realtors?</h3>`);
        sections.push(`<p>[Address concerns, explain full-service model]</p>`);

        sections.push(`<h3>How much can I save with a 1% commission?</h3>`);
        sections.push(`<p>[Calculation example]</p>`);

        sections.push(`<h3>Do I get the same service as traditional realtors?</h3>`);
        sections.push(`<p>[Yes, list services included]</p>`);
      }

      // CTA Section
      if (includeCta) {
        sections.push(`<h2>Ready to Save Thousands on Your Home Sale?</h2>`);
        sections.push(`<p>Contact TD Realty Ohio today for a free consultation. Discover how our 1% listing commission can put more money in your pocket.</p>`);
        sections.push(`<p><strong>[CALL TO ACTION BUTTON: Get Your Free Consultation]</strong></p>`);
        sections.push(`<ul>
          <li>1% listing commission (when buying + selling)</li>
          <li>FREE pre-listing inspection</li>
          <li>1% cashback for first-time homebuyers</li>
        </ul>`);
      }

      // Author Bio
      if (includeAuthor) {
        sections.push(`<hr>`);
        sections.push(`<h3>About the Author</h3>`);
        sections.push(`<p><strong>Travis Riddle</strong> - Broker, TD Realty Ohio, LLC</p>`);
        sections.push(`<p>Travis has been helping Central Ohio families buy and sell homes since 2017. Licensed as Broker #2023006467, he founded TD Realty Ohio (Brokerage #2023006602) to provide full-service real estate at a fraction of traditional commission costs.</p>`);
      }

      return sections.join('\n');
    }

    function generateHtml(title, keyword, type, city, metaDesc, includeFaq, includeCta, includeAuthor) {
      const slug = title.toLowerCase().replace(/[^a-z0-9\s-]/g, '').replace(/\s+/g, '-').substring(0, 50);

      let html = `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${escapeHtml(title)} | TD Realty Ohio</title>
  <meta name="description" content="${escapeHtml(metaDesc)}">
  <meta name="keywords" content="${escapeHtml(keyword)}, Columbus Ohio realtor, discount real estate">
  <link rel="canonical" href="https://tdrealtyohio.com/blog/${slug}">

  <!-- Open Graph -->
  <meta property="og:title" content="${escapeHtml(title)}">
  <meta property="og:description" content="${escapeHtml(metaDesc)}">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://tdrealtyohio.com/blog/${slug}">

  <!-- Schema markup in separate script tag -->
</head>
<body>
  <article>
    <header>
      <h1>${escapeHtml(title)}</h1>
      <p class="meta">
        By Travis Riddle | TD Realty Ohio | Published: [DATE]
      </p>
    </header>

    <section id="introduction">
      <p>[Introduction paragraph - 100-150 words. Include "${escapeHtml(keyword)}" naturally.]</p>
    </section>

    <!-- Main content sections here -->

    <section id="content">
      <h2>[Section Heading]</h2>
      <p>[Content...]</p>
    </section>`;

      if (includeFaq) {
        html += `

    <section id="faq">
      <h2>Frequently Asked Questions</h2>

      <div class="faq-item">
        <h3>Is a 1% commission realtor legitimate?</h3>
        <p>[Answer...]</p>
      </div>

      <div class="faq-item">
        <h3>How much can I save?</h3>
        <p>[Answer...]</p>
      </div>
    </section>`;
      }

      if (includeCta) {
        html += `

    <section id="cta" class="cta-section">
      <h2>Ready to Save Thousands?</h2>
      <p>Contact TD Realty Ohio today for a free consultation.</p>
      <a href="/contact" class="btn btn-primary">Get Your Free Consultation</a>
      <ul>
        <li>1% listing commission (buy + sell)</li>
        <li>FREE pre-listing inspection</li>
        <li>1% cashback for first-time buyers</li>
      </ul>
    </section>`;
      }

      if (includeAuthor) {
        html += `

    <footer class="author-bio">
      <h3>About the Author</h3>
      <p><strong>Travis Riddle</strong> - Broker, TD Realty Ohio, LLC</p>
      <p>Broker License #2023006467 | Brokerage #2023006602</p>
      <p>Helping Central Ohio families since 2017.</p>
    </footer>`;
      }

      html += `
  </article>
</body>
</html>`;

      return html;
    }

    function generateSchema(title, description, keyword) {
      return {
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": title,
        "description": description,
        "keywords": keyword,
        "author": {
          "@type": "Person",
          "name": "Travis Riddle",
          "jobTitle": "Broker",
          "worksFor": {
            "@type": "RealEstateAgent",
            "name": "TD Realty Ohio, LLC",
            "url": "https://tdrealtyohio.com"
          }
        },
        "publisher": {
          "@type": "Organization",
          "name": "TD Realty Ohio, LLC",
          "url": "https://tdrealtyohio.com",
          "logo": {
            "@type": "ImageObject",
            "url": "https://tdrealtyohio.com/logo.png"
          }
        },
        "datePublished": new Date().toISOString().split('T')[0],
        "dateModified": new Date().toISOString().split('T')[0],
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https://tdrealtyohio.com/blog/"
        }
      };
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function showTab(tab) {
      document.querySelectorAll('.tab-content').forEach(el => el.style.display = 'none');
      document.getElementById(`${tab}-tab`).style.display = 'block';
    }

    function copyHtml() {
      const html = document.getElementById('html-output').textContent;
      navigator.clipboard.writeText(html).then(() => alert('HTML copied to clipboard!'));
    }

    function copySchema() {
      const schema = document.getElementById('schema-output').textContent;
      navigator.clipboard.writeText(schema).then(() => alert('Schema JSON copied to clipboard!'));
    }

    function toggleTheme() {
      TDR.ThemeManager.toggle();
      updateThemeIcon();
    }

    function updateThemeIcon() {
      document.getElementById('theme-icon').innerHTML = TDR.ThemeManager.isDark() ? '&#9788;' : '&#9790;';
    }
  </script>
</body>
</html>
