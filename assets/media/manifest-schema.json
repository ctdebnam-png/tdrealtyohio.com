{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://tdrealtyohio.com/assets/media/manifest-schema.json",
  "title": "Media Manifest Schema",
  "description": "JSON schema for validating the media manifest file",
  "type": "object",
  "required": ["version", "generated", "pages"],
  "properties": {
    "version": {
      "type": "string",
      "description": "Schema version",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "generated": {
      "type": "string",
      "description": "ISO 8601 timestamp of when manifest was generated",
      "format": "date-time"
    },
    "pages": {
      "type": "object",
      "description": "Per-page media assignments",
      "patternProperties": {
        "^[a-z0-9/_-]+$": {
          "type": "object",
          "properties": {
            "hero_image": {
              "$ref": "#/definitions/media_asset"
            },
            "hero_video": {
              "$ref": "#/definitions/media_asset"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "media_asset": {
      "type": "object",
      "required": [
        "local_path",
        "source",
        "source_url",
        "author",
        "license_name",
        "license_url",
        "attribution_text",
        "fetched_at",
        "checksum"
      ],
      "properties": {
        "local_path": {
          "type": "string",
          "description": "Relative path to the media file"
        },
        "optimized_paths": {
          "type": "object",
          "description": "Paths to optimized versions (webp, responsive sizes)",
          "properties": {
            "webp": {
              "type": "string"
            },
            "sizes": {
              "type": "object",
              "properties": {
                "640": {"type": "string"},
                "1024": {"type": "string"},
                "1600": {"type": "string"}
              }
            }
          }
        },
        "source": {
          "type": "string",
          "enum": ["pexels", "pixabay", "unsplash", "wikimedia"],
          "description": "Source platform"
        },
        "source_url": {
          "type": "string",
          "format": "uri",
          "description": "Original URL on source platform"
        },
        "author": {
          "type": "string",
          "description": "Creator/photographer/videographer name"
        },
        "author_url": {
          "type": "string",
          "format": "uri",
          "description": "URL to creator's profile"
        },
        "license_name": {
          "type": "string",
          "description": "License name (e.g., 'Pexels License', 'CC0', 'CC BY-SA 4.0')"
        },
        "license_url": {
          "type": "string",
          "format": "uri",
          "description": "URL to full license text"
        },
        "attribution_text": {
          "type": "string",
          "description": "Complete attribution text for display"
        },
        "attribution_required": {
          "type": "boolean",
          "description": "Whether attribution must be displayed"
        },
        "fetched_at": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp when asset was fetched"
        },
        "checksum": {
          "type": "string",
          "description": "SHA-256 checksum of original file"
        },
        "perceptual_hash": {
          "type": "string",
          "description": "Perceptual hash for duplicate detection (images only)"
        },
        "width": {
          "type": "integer",
          "description": "Original width in pixels"
        },
        "height": {
          "type": "integer",
          "description": "Original height in pixels"
        },
        "file_size": {
          "type": "integer",
          "description": "File size in bytes"
        },
        "media_type": {
          "type": "string",
          "enum": ["image", "video"],
          "description": "Type of media"
        },
        "format": {
          "type": "string",
          "description": "File format (jpg, png, mp4, etc.)"
        },
        "duration": {
          "type": "number",
          "description": "Video duration in seconds (video only)"
        },
        "keywords": {
          "type": "array",
          "items": {"type": "string"},
          "description": "Search keywords used to find this asset"
        }
      }
    }
  }
}
