name: test-secrets
on:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Confirm secrets present (no values printed)
        env:
          PEXELS_API_KEY: ${{ secrets.PEXELS_API_KEY }}
          PIXABAY_API_KEY: ${{ secrets.PIXABAY_API_KEY }}
          UNSPLASH_ACCESS_KEY: ${{ secrets.UNSPLASH_ACCESS_KEY }}
        run: |
          missing=0
          for k in PEXELS_API_KEY PIXABAY_API_KEY UNSPLASH_ACCESS_KEY; do
            if [ -z "${!k}" ]; then
              echo "$k is MISSING"
              missing=1
            else
              echo "$k is PRESENT"
            fi
          done
          exit $missing
